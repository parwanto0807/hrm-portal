// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AccountEmail {
  id        String   @id @default(cuid())
  email     String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model User {
  id    String  @id @default(uuid())
  email String  @unique
  name  String?
  image String?

  // OAuth
  accounts Account[]
  sessions Session[]

  // Role
  role UserRole @default(EMPLOYEE)

  // Timestamps
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Status
  isActive Boolean @default(true)
}

model Account {
  id                String @id @default(uuid())
  userId            String
  user              User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  provider          String
  providerAccountId String

  access_token  String?
  refresh_token String?
  expires_at    Int?
  token_type    String?
  scope         String?
  id_token      String?
  session_state String?
  type          String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([provider, providerAccountId])
  @@index([userId])
}

model Session {
  id           String   @id @default(uuid())
  userId       String
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  sessionToken String   @unique
  expires      DateTime

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([userId])
}

enum UserRole {
  SUPER_ADMIN
  ADMIN
  HR_MANAGER
  DEPARTMENT_MANAGER
  EMPLOYEE
  GUEST
}

// ==========================================
// ENUM DEFINITIONS
// ==========================================

enum StatusAktif {
  TIDAK_AKTIF
  AKTIF
}

enum JenisKelamin {
  LAKILAKI
  PEREMPUAN
}

enum StatusKaryawan {
  TETAP
  KONTRAK
  PERCOBAAN
  HONORER
  OUTSOURCING
}

enum StatusPernikahan {
  BELUM_MENIKAH
  MENIKAH
  JANDA
  DUDA
}

enum JenisPotongan {
  PINJAMAN
  KOPERASI
  BPJS
  PPH21
  LAINNYA
}

enum JenisTunjangan {
  TRANSPORT
  MAKAN
  JABATAN
  KELUARGA
  KHUSUS
  RAPEL
}

enum StatusCuti {
  DRAFT
  PENDING
  APPROVED
  REJECTED
  CANCELLED
}

enum TipeHari {
  KERJA
  LIBUR
  LIBUR_NASIONAL
  CUTI_BERSAMA
}

enum ShiftType {
  PAGI
  SIANG
  MALAM
  LIBUR
}

// ==========================================
// MASTER DATA & ORGANISASI
// ==========================================

model Company {
  id         String   @id @default(uuid()) @db.Uuid
  kodeCmpy   String   @unique @map("KODE_CMPY") @db.Char(3)
  company    String?  @map("COMPANY") @db.VarChar(40)
  address1   String?  @map("ADDRESS1") @db.VarChar(40)
  address2   String?  @map("ADDRESS2") @db.VarChar(40)
  address3   String?  @map("ADDRESS3") @db.VarChar(40)
  tlp        String?  @map("TLP") @db.VarChar(15)
  fax        String?  @map("FAX") @db.VarChar(15)
  npwp       String?  @map("NPWP") @db.VarChar(20)
  director   String?  @map("DIRECTOR") @db.VarChar(25)
  npwpDir    String?  @map("NPWPDIR") @db.VarChar(20)
  logo       String?  @map("LOGO") @db.VarChar(80)
  npp        String?  @map("NPP") @db.VarChar(30)
  astekBayar String?  @map("ASTEKBAYAR") @db.VarChar(80)
  email      String?  @map("EMAIL") @db.VarChar(30)
  homepage   String?  @map("HOMEPAGE") @db.VarChar(50)
  hrdMng     String?  @map("HRDMNG") @db.VarChar(30)
  npwpMng    String?  @map("NPWPMNG") @db.VarChar(20)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan  Karyawan[]
  timeWork  TimeWork[]
  parameter Parameter[]
  dshift    Dshift[]
  periode   Periode[]

  @@index([kodeCmpy])
  @@map("company")
}

model MstFact {
  kdFact     String   @id @map("CKD_FACT") @db.VarChar(20)
  nmFact     String?  @map("CNM_FACT") @db.VarChar(30)
  keterangan String?  @map("KETERANGAN") @db.VarChar(50)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan[]

  @@map("mstfact")
}

model MstBag {
  kdBag      String   @id @map("CKD_BAG") @db.VarChar(20)
  nmBag      String?  @map("CNM_BAG") @db.VarChar(30)
  keterangan String?  @map("KETERANGAN") @db.VarChar(50)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  depts    MstDept[]
  sies     MstSie[]
  karyawan Karyawan[]

  @@map("mstbag")
}

model MstDept {
  id         String   @id @default(uuid()) @db.Uuid
  kdBag      String?  @map("CKD_BAG") @db.VarChar(20)
  kdDept     String   @unique @map("CKD_DEPT") @db.VarChar(20)
  nmDept     String?  @map("CNM_DEPT") @db.VarChar(30)
  keterangan String?  @map("KETERANGAN") @db.VarChar(50)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  bag      MstBag?    @relation(fields: [kdBag], references: [kdBag])
  sies     MstSie[]
  karyawan Karyawan[]

  @@unique([kdBag, kdDept], name: "dept_unique")
  @@index([kdBag])
  @@map("mstdept")
}

model MstSie {
  id         String   @id @default(uuid()) @db.Uuid
  kdBag      String?  @map("CKD_BAG") @db.VarChar(20)
  kdDept     String?  @map("CKD_DEPT") @db.VarChar(20)
  kdSeksie   String   @unique @map("CKD_SIE") @db.VarChar(6)
  nmSeksie   String?  @map("CNM_SIE") @db.VarChar(30)
  keterangan String?  @map("KETERANGAN") @db.VarChar(80)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  bag      MstBag?    @relation(fields: [kdBag], references: [kdBag])
  dept     MstDept?   @relation(fields: [kdDept], references: [kdDept])
  karyawan Karyawan[]

  @@unique([kdBag, kdDept, kdSeksie], name: "sie_unique")
  @@index([kdBag, kdDept])
  @@map("mstsie")
}

model MstJab {
  kdJab      String   @id @map("CKD_JAB") @db.VarChar(20)
  nmJab      String?  @map("CNM_JAB") @db.VarChar(30)
  nTjabatan  Decimal? @map("NTJABATAN") @db.Decimal(12, 0)
  nTransport Decimal? @map("NTRANSPORT") @db.Decimal(12, 0)
  nShiftAll  Decimal? @map("NSHIFT_ALL") @db.Decimal(12, 0)
  nPremiHdr  Decimal? @map("NPREMI_HDR") @db.Decimal(12, 0)
  persenRmh  Decimal? @map("PERSEN_RMH") @db.Decimal(5, 2)
  persenPph  Decimal? @map("PERSEN_PPH") @db.Decimal(5, 2)
  keterangan String?  @map("KETERANGAN") @db.VarChar(50)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan[]
  gaji     Gaji[]

  @@map("mstjab")
}

model MstPkt {
  kdPkt      String   @id @map("CKD_PKT") @db.VarChar(5)
  nmPkt      String?  @map("CNM_PKT") @db.VarChar(30)
  keterangan String?  @map("KETERANGAN") @db.VarChar(30)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan[]

  @@map("mstpkt")
}

model MstAgm {
  kdAgm      String   @id @map("CKD_AGM") @db.VarChar(2)
  nmAgm      String?  @map("CNM_AGM") @db.VarChar(30)
  keterangan String?  @map("KETERANGAN") @db.VarChar(50)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan[]

  @@map("mstagm")
}

model MstSkl {
  kdSkl      String   @id @map("CKD_SKL") @db.VarChar(2)
  nmSkl      String?  @map("CNM_SKL") @db.VarChar(30)
  keterangan String?  @map("KETERANGAN") @db.VarChar(50)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan[]

  @@map("mstskl")
}

model Bank {
  bankCode  String   @id @map("BANK_CODE") @db.Char(2)
  bankNama  String?  @map("BANK_NAMA") @db.VarChar(30)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan[]

  @@map("bank")
}

// ==========================================
// KARYAWAN & DATA PERSONAL
// ==========================================

model Karyawan {
  id      String  @id @default(uuid()) @db.Uuid
  emplId  String  @unique @map("EMPL_ID") @db.VarChar(9)
  nik     String? @unique @map("NIK") @db.VarChar(16)
  idAbsen String? @map("ID_ABSEN") @db.VarChar(9)
  nama    String  @map("NAMA") @db.VarChar(50)

  // Foreign Keys
  kdCmpy   String? @map("KD_CMPY") @db.Char(3)
  kdFact   String? @map("KD_FACT") @db.VarChar(2)
  kdBag    String? @map("KD_BAG") @db.VarChar(20)
  kdDept   String? @map("KD_DEPT") @db.VarChar(20)
  kdSeksie String? @map("KD_SEKSIE") @db.VarChar(6)
  kdPkt    String? @map("KD_PKT") @db.VarChar(5)
  kdJab    String? @map("KD_JAB") @db.VarChar(20)
  kdAgm    String? @map("KD_AGM") @db.VarChar(2)
  kdSkl    String? @map("KD_SKL") @db.VarChar(2)
  bankCode String? @map("BANK_CODE") @db.Char(2)

  // Data Personal
  kdSex     JenisKelamin? @default(LAKILAKI) @map("KD_SEX")
  alamat1   String?       @map("ALAMAT1") @db.VarChar(100)
  alamat2   String?       @map("ALAMAT2") @db.VarChar(100)
  kota      String?       @map("KOTA") @db.VarChar(30)
  kdPos     String?       @map("KD_POS") @db.VarChar(5)
  telpon    String?       @map("TELPON") @db.VarChar(16)
  handphone String?       @map("HANDPHONE") @db.VarChar(16)
  email     String?       @map("EMAIL") @db.VarChar(50)
  tmpLhr    String?       @map("TMP_LHR") @db.VarChar(30)
  tglLhr    DateTime?     @map("TGL_LHR") @db.Date
  tglAngkat DateTime?     @map("TGL_ANGKAT") @db.Date

  // Dokumen
  ktpNo      String?   @map("KTPNO") @db.VarChar(20)
  validKtp   DateTime? @map("VALID_KTP") @db.Date
  npwp       String?   @map("NPWP") @db.VarChar(20)
  tglNpwp    DateTime? @map("TGL_NPWP") @db.Date
  typeSim    String?   @map("TYPE_SIM") @db.VarChar(2)
  noSim      String?   @map("NO_SIM") @db.VarChar(20)
  validSim   DateTime? @map("VALID_SIM") @db.Date
  pasportNo  String?   @map("PASPORTNO") @db.VarChar(20)
  kitasNo    String?   @map("KITASNO") @db.VarChar(20)
  validKitas DateTime? @map("VALID_KITAS") @db.Date

  // BPJS & Asuransi
  noBpjsTk  String?   @map("NOBPJSTK") @db.VarChar(20)
  noBpjsKes String?   @map("NOBPJSKES") @db.VarChar(20)
  kdBpjsTk  Boolean?  @default(true) @map("KD_BPJSTK")
  kdBpjsKes Boolean?  @default(true) @map("KD_BPJSKES")
  tglAstek  DateTime? @map("TGL_ASTEK") @db.Date

  // Bank & Rekening
  bankUnit    String? @map("BANK_UNIT") @db.VarChar(30)
  bankRekNo   String? @map("BANK_REKNO") @db.VarChar(20)
  bankRekName String? @map("BANK_REKNAME") @db.VarChar(30)

  // Status Karyawan
  tglMsk     DateTime?       @map("TGL_MSK") @db.Date
  tglOut     DateTime?       @map("TGL_OUT") @db.Date
  alasanOut  String?         @map("ALASAN_OUT") @db.VarChar(100)
  kdOut      Boolean?        @default(false) @map("KD_OUT")
  kdJns      StatusKaryawan? @default(TETAP) @map("KD_JNS")
  hariKerja  Int?            @default(5) @map("HARI_KERJA")
  groupShift String?         @default("00") @map("GROUP_SHIFT") @db.VarChar(2)
  kdGaji     Int?            @default(1) @map("KD_GAJI")
  kdWni      Boolean?        @default(true) @map("KD_WNI")
  kdSts      StatusAktif?    @default(AKTIF) @map("KD_STS")

  // Status Pernikahan & Keluarga
  tglNikah DateTime? @map("TGL_NIKAH") @db.Date
  kdPtkp   Int?      @default(1) @map("KD_PTKP")
  jmlAnak  Int?      @default(0) @map("JMLANAK")

  // Absensi & Lembur
  kdLmb Boolean? @default(true) @map("KD_LMB")
  kdSpl Boolean? @default(true) @map("KD_SPL")

  // Pajak
  kdPjk   Boolean? @default(true) @map("KD_PJK")
  typePjk Int?     @default(1) @map("TYPE_PJK")

  // Jam Kerja
  kdJam String? @default("A") @map("KD_JAM") @db.VarChar(2)

  // Koperasi & Pinjaman
  kdKoperasi  Boolean?  @default(false) @map("KD_KOPERASI")
  kdptRumah   Boolean?  @default(false) @map("KDPT_RUMAH")
  potRumah    Decimal?  @default(0) @map("POT_RUMAH") @db.Decimal(5, 0)
  tglKoperasi DateTime? @map("TGL_KOPERASI") @db.Date
  noAnggota   String?   @map("No_ANGGOTA") @db.VarChar(9)

  // Serikat & Uniform
  kdSpsi   Boolean? @default(false) @map("KD_SPSI")
  uniform1 String?  @map("UNIFORM1") @db.Char(3)
  uniform2 Decimal? @default(0) @map("UNIFORM2") @db.Decimal(4, 0)

  // Data Fisik
  glDarah String?  @map("GLDARAH") @db.VarChar(2)
  tinggi  Decimal? @default(0) @map("TINGGI") @db.Decimal(3, 0)
  berat   Decimal? @default(0) @map("BERAT") @db.Decimal(5, 2)

  // Gaji Pokok & Tunjangan
  pokokBln    Decimal? @default(0) @map("POKOK_BLN") @db.Decimal(12, 0)
  tTransport  Decimal? @default(0) @map("TTRANSPORT") @db.Decimal(12, 0)
  kdTransp    Boolean? @default(true) @map("KD_TRANSP")
  tMakan      Decimal? @default(0) @map("TMAKAN") @db.Decimal(12, 0)
  kdMakan     Boolean? @default(true) @map("KD_MAKAN")
  tJabatan    Decimal? @default(0) @map("TJABATAN") @db.Decimal(12, 0)
  tKeluarga   Decimal? @default(0) @map("TKELUARGA") @db.Decimal(12, 0)
  tKomunikasi Decimal? @default(0) @map("TKOMUNIKASI") @db.Decimal(12, 0)
  tKhusus     Decimal? @default(0) @map("TKHUSUS") @db.Decimal(12, 0)
  tLmbtetap   Decimal? @default(0) @map("TLMBTETAP") @db.Decimal(12, 0)
  fixOther    Decimal? @default(0) @map("FIXOTHER") @db.Decimal(12, 0)

  // Kontak Darurat
  nmTeman  String? @map("NM_TEMAN") @db.VarChar(30)
  almTeman String? @map("ALM_TEMAN") @db.VarChar(40)
  tlpTeman String? @map("TLP_TEMAN") @db.VarChar(12)
  hubTeman String? @map("HUB_TEMAN") @db.VarChar(10)

  // Foto & Dokumen
  lokasiPoto String? @map("LOKASIPOTO") @db.VarChar(100)
  kkNo       String? @map("KKNO") @db.VarChar(20)
  ibuKandung String? @map("IBUKANDUNG") @db.VarChar(50)
  alamatDom1 String? @map("ALAMATDOM1") @db.VarChar(200)
  alamatDom2 String? @map("ALAMATDOM2") @db.VarChar(200)
  imagesName String? @map("ImagesName") @db.VarChar(100)
  imagesSize String? @map("ImagesSize") @db.VarChar(50)

  // Audit Trail
  createdBy String?   @map("created_by") @db.VarChar(50)
  updatedBy String?   @map("updated_by") @db.VarChar(50)
  createdAt DateTime  @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime  @updatedAt @map("updated_at") @db.Timestamp
  deletedAt DateTime? @map("deleted_at") @db.Timestamp

  // Relations
  company Company? @relation(fields: [kdCmpy], references: [kodeCmpy])
  fact    MstFact? @relation(fields: [kdFact], references: [kdFact])
  bag     MstBag?  @relation(fields: [kdBag], references: [kdBag])
  dept    MstDept? @relation(fields: [kdDept], references: [kdDept])
  sie     MstSie?  @relation(fields: [kdSeksie], references: [kdSeksie])
  jabatan MstJab?  @relation(fields: [kdJab], references: [kdJab])
  pkt     MstPkt?  @relation(fields: [kdPkt], references: [kdPkt])
  agama   MstAgm?  @relation(fields: [kdAgm], references: [kdAgm])
  sekolah MstSkl?  @relation(fields: [kdSkl], references: [kdSkl])
  bank    Bank?    @relation(fields: [bankCode], references: [bankCode])

  // Related Data
  keluarga      Keluarga[]
  sekolahHist   Sekolah[]
  kursus        Kursus[]
  kerjaHist     Kerja[]
  kontrak       Kontrak[]
  kondite       Kondite[]
  mutasi        Mutasi[]
  pesangon      Pesangon?
  absent        Absent[]
  attLog        AttLog[]
  lembur        Lembur[]
  gaji          Gaji[]
  potongan      Potongan[]
  tunjangan     Tunjangan[]
  rapel         Rapel[]
  pphThn        PphThn[]
  pinjamHdr     PinjamHdr[]
  pinjamDet     PinjamDet[]
  saldoMedic    SaldoMedic[]
  medikTrans    MedikTrans[]
  dcuti         Dcuti[]
  hcuti         Hcuti[]
  shiftAllw     ShiftAllw[]
  jnsJam        JnsJam?      @relation(fields: [jnsJamKdJam], references: [kdJam])
  jnsJamKdJam   String?      @db.VarChar(2)
  sysUsers      SysUser[]
  groupShiftRef GroupShift?  @relation(fields: [groupShift], references: [groupShift])

  @@index([kdCmpy])
  @@index([kdFact])
  @@index([kdBag])
  @@index([kdDept])
  @@index([kdSeksie])
  @@index([kdJab])
  @@index([tglMsk])
  @@index([tglOut])
  @@index([nama])
  @@index([nik])
  @@index([kdSts])
  @@map("karyawan")
}

model Keluarga {
  id        String    @id @default(uuid()) @db.Uuid
  childNo   Int       @default(0) @map("CHILD_NO")
  emplId    String    @map("EMPL_ID") @db.VarChar(9)
  nik       String?   @map("NIK") @db.VarChar(10)
  nama      String?   @map("NAMA") @db.VarChar(35)
  sex       String?   @default("L") @map("SEX") @db.Char(1)
  kdHub     Int?      @default(1) @map("KD_HUB")
  tmpLahir  String?   @map("TMP_LAHIR") @db.VarChar(15)
  tglLahir  DateTime? @map("TGL_LAHIR") @db.Date
  pekerjaan String?   @map("PEKERJAAN") @db.VarChar(40)
  photo     String?   @map("PHOTO") @db.VarChar(80)
  createdAt DateTime  @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime  @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan @relation(fields: [emplId], references: [emplId])

  @@unique([childNo, emplId], name: "keluarga_unique")
  @@index([emplId])
  @@map("keluarga")
}

model Sekolah {
  id         String   @id @default(uuid()) @db.Uuid
  emplId     String   @map("EMPL_ID") @db.VarChar(9)
  childNo    Int      @default(0) @map("CHILD_NO")
  nik        String?  @map("NIK") @db.VarChar(10)
  tingkat    String?  @map("TINGKAT") @db.VarChar(2)
  tempat     String?  @map("TEMPAT") @db.VarChar(50)
  thnMsk     Int?     @default(2000) @map("THN_MSK")
  thnLulus   Int?     @default(2000) @map("THN_LULUS")
  keterangan String?  @map("KETERANGAN") @db.VarChar(60)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan @relation(fields: [emplId], references: [emplId])

  @@unique([emplId, childNo], name: "sekolah_unique")
  @@index([emplId])
  @@map("sekolah")
}

model Kursus {
  id        String    @id @default(uuid()) @db.Uuid
  childNo   Int       @default(0) @map("CHILD_NO")
  emplId    String    @map("EMPL_ID") @db.VarChar(9)
  nik       String?   @map("NIK") @db.VarChar(10)
  nmKursus  String?   @map("NM_KURSUS") @db.VarChar(40)
  periode1  DateTime? @map("PERIODE1") @db.Date
  periode2  DateTime? @map("PERIODE2") @db.Date
  ketKursus String?   @map("KET_KURSUS") @db.VarChar(40)
  createdAt DateTime  @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime  @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan @relation(fields: [emplId], references: [emplId])

  @@unique([childNo, emplId], name: "kursus_unique")
  @@index([emplId])
  @@map("kursus")
}

model Kerja {
  id        String   @id @default(uuid()) @db.Uuid
  childNo   Int      @default(0) @map("CHILD_NO")
  emplId    String   @map("EMPL_ID") @db.VarChar(9)
  nik       String?  @map("NIK") @db.VarChar(10)
  periode   String?  @map("PERIODE") @db.VarChar(20)
  company   String?  @map("COMPANY") @db.VarChar(40)
  jabatan   String?  @map("JABATAN") @db.VarChar(10)
  jobdesc   String?  @map("JOBDESC") @db.VarChar(80)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan @relation(fields: [emplId], references: [emplId])

  @@unique([childNo, emplId], name: "kerja_unique")
  @@index([emplId])
  @@map("kerja")
}

model Kontrak {
  id         String    @id @default(uuid()) @db.Uuid
  emplId     String    @map("EMPL_ID") @db.VarChar(9)
  nik        String?   @map("NIK") @db.VarChar(10)
  tglMulai   DateTime  @map("TGL_MULAI") @db.Date
  tglAkhir   DateTime? @map("TGL_AKHIR") @db.Date
  keterangan String?   @map("KETERANGAN") @db.VarChar(60)
  createdAt  DateTime  @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime  @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan @relation(fields: [emplId], references: [emplId])

  @@unique([emplId, tglMulai], name: "kontrak_unique")
  @@index([emplId])
  @@index([tglMulai, tglAkhir])
  @@map("kontrak")
}

model Kondite {
  id         String    @id @default(uuid()) @db.Uuid
  childNo    Int       @default(0) @map("CHILD_NO")
  noSurat    String?   @map("NO_SURAT") @db.VarChar(40)
  emplId     String    @map("EMPL_ID") @db.VarChar(9)
  tahun      Int?      @default(2000) @map("TAHUN")
  nik        String?   @map("NIK") @db.VarChar(10)
  tglSurat   DateTime? @map("TGL_SURAT") @db.Date
  kdSifat    Int?      @default(0) @map("KD_SIFAT")
  perihal    String?   @map("PERIHAL") @db.VarChar(40)
  keterangan String?   @map("KETERANGAN") @db.VarChar(80)
  createdAt  DateTime  @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime  @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan @relation(fields: [emplId], references: [emplId])

  @@unique([childNo, emplId], name: "kondite_unique")
  @@index([emplId])
  @@index([tahun])
  @@map("kondite")
}

model Mutasi {
  id        String   @id @default(uuid()) @db.Uuid
  tglMutasi DateTime @map("TGL_MUTASI") @db.Date
  emplId    String   @map("EMPL_ID") @db.VarChar(9)
  nik       String?  @map("NIK") @db.VarChar(10)
  nama      String?  @map("NAMA") @db.VarChar(30)
  factAsal  String?  @map("FACT_ASAL") @db.VarChar(2)
  bagAsal   String?  @map("BAG_ASAL") @db.VarChar(2)
  deptAsal  String?  @map("DEPT_ASAL") @db.VarChar(2)
  factBaru  String?  @map("FACT_BARU") @db.VarChar(2)
  bagBaru   String?  @map("BAG_BARU") @db.VarChar(2)
  deptBaru  String?  @map("DEPT_BARU") @db.VarChar(2)
  remark    String?  @map("REMARK") @db.VarChar(100)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan @relation(fields: [emplId], references: [emplId])

  @@unique([tglMutasi, emplId], name: "mutasi_unique")
  @@index([emplId])
  @@index([tglMutasi])
  @@map("mutasi")
}

model Pesangon {
  id          String    @id @default(uuid()) @db.Uuid
  emplId      String    @unique @map("EMPL_ID") @db.VarChar(9)
  nik         String?   @map("NIK") @db.VarChar(10)
  tglBayar    DateTime? @map("TGL_BAYAR") @db.Date
  tglPensiun  DateTime? @map("TGL_PENSIUN") @db.Date
  msKerja     Int?      @default(0) @map("MS_KERJA")
  jmlPesangon Decimal?  @default(0) @map("JML_PESANGON") @db.Decimal(15, 0)
  penghargaan Decimal?  @default(0) @map("PENGHARGAAN") @db.Decimal(15, 0)
  pph         Decimal?  @default(0) @map("PPH") @db.Decimal(15, 0)
  totalTerima Decimal?  @default(0) @map("TOTAL_TERIMA") @db.Decimal(15, 0)
  keterangan  String?   @map("KETERANGAN") @db.VarChar(50)
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamp
  updatedAt   DateTime  @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan @relation(fields: [emplId], references: [emplId])

  @@index([tglBayar])
  @@map("pesangon")
}

// ==========================================
// ABSENSI & WAKTU KERJA
// ==========================================

model Absent {
  id       String   @id @default(uuid()) @db.Uuid
  periode  String   @default("") @map("PERIODE") @db.VarChar(6)
  emplId   String   @map("EMPL_ID") @db.VarChar(9)
  tglAbsen DateTime @map("TGL_ABSEN") @db.Date
  nik      String?  @map("NIK") @db.VarChar(10)
  idAbsen  String?  @map("ID_ABSEN") @db.VarChar(9)
  nama     String?  @map("NAMA") @db.VarChar(30)

  // Foreign Keys
  kdCmpy   String? @map("KD_CMPY") @db.VarChar(3)
  kdFact   String? @map("KD_FACT") @db.VarChar(2)
  kdBag    String? @map("KD_BAG") @db.VarChar(2)
  kdDept   String? @map("KD_DEPT") @db.VarChar(2)
  kdSeksie String? @map("KD_SEKSIE") @db.VarChar(6)
  kdJam    String? @map("KD_JAM") @db.VarChar(2)

  groupShift String? @default("") @map("GROUP_SHIFT") @db.Char(2)
  stdMasuk   String? @map("STDMASUK") @db.VarChar(5)
  stdKeluar  String? @map("STDKELUAR") @db.VarChar(5)
  realMasuk  String? @map("REALMASUK") @db.VarChar(5)
  realKeluar String? @map("REALKELUAR") @db.VarChar(5)
  jMasuk     String? @map("JMASUK") @db.VarChar(5)
  jKeluar    String? @map("JKELUAR") @db.VarChar(5)

  kdLmb     Boolean? @default(false) @map("KD_LMB")
  kdSpl     Boolean? @default(true) @map("KD_SPL")
  lembur1   Decimal? @default(0.00) @map("LEMBUR1") @db.Decimal(6, 2)
  lembur2   Decimal? @default(0.00) @map("LEMBUR2") @db.Decimal(6, 2)
  lembur3   Decimal? @default(0.00) @map("LEMBUR3") @db.Decimal(6, 2)
  lembur4   Decimal? @default(0.00) @map("LEMBUR4") @db.Decimal(6, 2)
  totKerja  Decimal? @default(0.00) @map("TOTKERJA") @db.Decimal(6, 2)
  lambat    Int?     @default(0) @map("LAMBAT")
  cepat     Int?     @default(0) @map("CEPAT")
  kdHari    Int?     @default(1) @map("KD_HARI")
  kdAbsen   String?  @default("H") @map("KD_ABSEN") @db.Char(1)
  kdShif    Int?     @default(1) @map("KD_SHIF")
  mskLmb    String?  @map("MSK_LMB") @db.VarChar(5)
  klrLmb    String?  @map("KLR_LMB") @db.VarChar(5)
  totLmb    Decimal? @default(0.00) @map("TOT_LMB") @db.Decimal(7, 2)
  ketLmb    String?  @map("KET_LMB") @db.VarChar(30)
  flagShift Boolean? @default(false) @map("FLAG_SHIFT")
  flagMeal  Boolean? @default(false) @map("FLAG_MEAL")
  flagSusu  Boolean? @default(false) @map("FLAG_SUSU")
  kodeDesc  String?  @default("") @map("KODE_DESC") @db.VarChar(3)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan   Karyawan   @relation(fields: [emplId], references: [emplId])
  descAbsen  DescAbsen? @relation(fields: [kodeDesc], references: [kodeDesc])
  periodeRef Periode?   @relation(fields: [periode], references: [periodeId])
  jnsJam     JnsJam?    @relation(fields: [kdJam], references: [kdJam])

  @@unique([emplId, tglAbsen], name: "absent_unique")
  @@index([periode])
  @@index([emplId])
  @@index([tglAbsen])
  @@index([kdAbsen])
  @@index([kdLmb])
  @@map("absent")
}

model AttLog {
  id        String   @id @default(uuid()) @db.Uuid
  nik       String   @default("") @map("nik") @db.VarChar(20)
  idAbsen   String   @default("") @map("id_absen") @db.VarChar(9)
  tanggal   DateTime @default(now()) @map("tanggal") @db.Date
  jam       String   @default("") @map("jam") @db.Char(5)
  cflag     String   @default("") @map("cflag") @db.Char(1)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp

  // Relations
  karyawan Karyawan? @relation(fields: [nik], references: [nik])

  @@unique([nik, tanggal, jam, cflag], name: "att_log_unique")
  @@index([nik])
  @@index([tanggal])
  @@map("att_log")
}

model TimeWork {
  id           String   @id @default(uuid()) @db.Uuid
  tanggal      DateTime @map("TANGGAL") @db.Date
  kdCmpy       String   @map("KD_CMPY") @db.VarChar(3)
  typeTime     String   @map("TYPE_TIME") @db.VarChar(2)
  dayCode      Int      @default(0) @map("DAY_CODE")
  shiftCode    Int      @default(0) @map("SHIFT_CODE")
  dayName      String?  @map("DAY_NAME") @db.VarChar(20)
  timeIn       String?  @map("TIME_IN") @db.VarChar(5)
  timeOut      String?  @map("TIME_OUT") @db.VarChar(5)
  strRest1     String?  @map("STR_REST1") @db.VarChar(5)
  fnsRest1     String?  @map("FNS_REST1") @db.VarChar(5)
  ttlRest1     Int?     @default(0) @map("TTL_REST1")
  strRest2     String?  @map("STR_REST2") @db.VarChar(5)
  fnsRest2     String?  @map("FNS_REST2") @db.VarChar(5)
  ttlRest2     Int?     @default(0) @map("TTL_REST2")
  strRest3     String?  @map("STR_REST3") @db.VarChar(5)
  fnsRest3     String?  @map("FNS_REST3") @db.VarChar(5)
  ttlRest3     Int?     @default(0) @map("TTL_REST3")
  totalWork    Int?     @default(0) @map("TOTAL_WORK")
  jmBiasa1     Int?     @default(0) @map("JM_BIASA1")
  jmBiasa2     Int?     @default(0) @map("JM_BIASA2")
  jmSabtu      Int?     @default(0) @map("JM_SABTU")
  jmlHari      Int?     @default(0) @map("JML_HARI")
  lateTolerant Int?     @default(0) @map("LATE_TOLERANT")
  roundJam     Int?     @default(30) @map("ROUND_JAM")
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt    DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  company Company? @relation(fields: [kdCmpy], references: [kodeCmpy])

  @@unique([tanggal, kdCmpy, typeTime, dayCode, shiftCode], name: "time_work_unique")
  @@index([tanggal])
  @@index([kdCmpy])
  @@map("time_work")
}

model Lembur {
  id         String   @id @default(uuid()) @db.Uuid
  periode    String   @map("PERIODE") @db.VarChar(6)
  emplId     String   @map("EMPL_ID") @db.VarChar(9)
  tglLembur  DateTime @map("TGL_LEMBUR") @db.Date
  nik        String?  @map("NIK") @db.VarChar(10)
  nama       String?  @map("NAMA") @db.VarChar(30)
  kdCmpy     String?  @map("KD_CMPY") @db.VarChar(3)
  kdFact     String?  @map("KD_FACT") @db.VarChar(2)
  kdBag      String?  @map("KD_BAG") @db.VarChar(2)
  kdDept     String?  @map("KD_DEPT") @db.VarChar(2)
  kdSeksie   String?  @map("KD_SEKSIE") @db.VarChar(6)
  kdJam      String?  @map("KD_JAM") @db.VarChar(2)
  kdHari     Int?     @default(1) @map("KD_HARI")
  kdShif     Int?     @default(1) @map("KD_SHIF")
  realMulai  String?  @map("REAL_MULAI") @db.VarChar(5)
  realAkhir  String?  @map("REAL_AKHIR") @db.VarChar(5)
  planMulai  String?  @map("PLAN_MULAI") @db.VarChar(5)
  planAkhir  String?  @map("PLAN_AKHIR") @db.VarChar(5)
  typeOt     Int?     @default(1) @map("TYPE_OT")
  totLembur  Decimal? @default(0.00) @map("TOT_LEMBUR") @db.Decimal(6, 2)
  ketLembur  String?  @map("KET_LEMBUR") @db.VarChar(30)
  lembur1    Decimal? @default(0.00) @map("LEMBUR1") @db.Decimal(6, 2)
  lembur2    Decimal? @default(0.00) @map("LEMBUR2") @db.Decimal(6, 2)
  lembur3    Decimal? @default(0.00) @map("LEMBUR3") @db.Decimal(6, 2)
  lembur4    Decimal? @default(0.00) @map("LEMBUR4") @db.Decimal(6, 2)
  approved   Boolean? @default(false) @map("approved")
  approvedBy String?  @map("approved_by") @db.VarChar(50)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan    Karyawan @relation(fields: [emplId], references: [emplId])
  periodeRef  Periode? @relation(fields: [periode], references: [periodeId])
  jnsJam      JnsJam?  @relation(fields: [jnsJamKdJam], references: [kdJam])
  jnsJamKdJam String?  @db.VarChar(2)

  @@unique([emplId, tglLembur], name: "lembur_unique")
  @@index([periode])
  @@index([emplId])
  @@index([tglLembur])
  @@map("lembur")
}

model Holiday {
  id         String    @id @default(uuid()) @db.Uuid
  tanggal    DateTime  @unique @map("TANGGAL") @db.Date
  keterangan String?   @map("KETERANGAN") @db.VarChar(40)
  typeDay    TipeHari? @default(LIBUR_NASIONAL) @map("TYPE_DAY")
  isRepeat   Boolean?  @default(true) @map("is_repeat")
  createdAt  DateTime  @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime  @updatedAt @map("updated_at") @db.Timestamp

  @@index([tanggal])
  @@map("holiday")
}

model DescAbsen {
  kodeDesc   String   @id @map("KODE_DESC") @db.Char(3)
  keterangan String?  @map("KETERANGAN") @db.VarChar(30)
  colorCode  String?  @default("#000000") @map("color_code") @db.VarChar(7)
  isActive   Boolean? @default(true) @map("is_active")
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  absent   Absent[]
  jnsCutis JnsCuti[]

  @@map("desc_absen")
}

model JnsJam {
  kdJam     String   @id @map("KD_JAM") @db.VarChar(2)
  jnsJam    String?  @map("JNS_JAM") @db.VarChar(30)
  jmShif    Int?     @default(1) @map("JMSHIF")
  isActive  Boolean? @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  absent   Absent[]
  lembur   Lembur[]
  karyawan Karyawan[]

  @@map("jnsjam")
}

// ==========================================
// PENGGAJIAN (PAYROLL)
// ==========================================

model Gaji {
  id           String    @id @default(uuid()) @db.Uuid
  period       String    @map("PERIOD") @db.VarChar(6)
  emplId       String    @map("EMPL_ID") @db.VarChar(9)
  tglProses    DateTime  @map("TGL_PROSES") @db.Date
  nik          String?   @map("NIK") @db.VarChar(10)
  nama         String?   @map("NAMA") @db.VarChar(30)
  kdCmpy       String?   @map("KD_CMPY") @db.VarChar(3)
  kdFact       String?   @map("KD_FACT") @db.VarChar(2)
  kdBag        String?   @map("KD_BAG") @db.VarChar(2)
  kdDept       String?   @map("KD_DEPT") @db.VarChar(2)
  kdSeksie     String?   @map("KD_SEKSIE") @db.VarChar(6)
  kdJab        String?   @map("KD_JAB") @db.VarChar(3)
  tglMsk       DateTime  @map("TGL_MSK") @db.Date
  typeEmpl     Int?      @default(0) @map("TYPE_EMPL")
  kdPtkp       Int?      @default(0) @map("KD_PTKP")
  kdPjk        Int?      @default(0) @map("KD_PJK")
  typePjk      Int?      @default(0) @map("TYPE_PJK")
  kdBpjsTk     Boolean?  @default(false) @map("KD_BPJSTK")
  kdBpjsKes    Boolean?  @default(false) @map("KD_BPJSKES")
  kdOut        Boolean?  @default(false) @map("KD_OUT")
  kdJns        Int?      @default(0) @map("KD_JNS")
  thnKerja     Int?      @default(0) @map("THN_KERJA")
  blnKerja     Int?      @default(0) @map("BLN_KERJA")
  hrKerja      Int?      @default(0) @map("HR_KERJA")
  persenMasa   Decimal?  @default(0.00) @map("PERSENMASA") @db.Decimal(5, 2)
  persenRmh    Decimal?  @default(0.00) @map("PERSEN_RMH") @db.Decimal(5, 2)
  hrKerja1     Int?      @default(0) @map("HR_KERJA1")
  hrKerja2     Int?      @default(0) @map("HR_KERJA2")
  pokokBln     Decimal?  @default(0) @map("POKOK_BLN") @db.Decimal(15, 0)
  pokokTrm     Decimal?  @default(0) @map("POKOK_TRM") @db.Decimal(15, 0)
  tJabatan     Decimal?  @default(0) @map("TJABATAN") @db.Decimal(15, 0)
  tTransport   Decimal?  @default(0) @map("TTRANSPORT") @db.Decimal(15, 0)
  tKhusus      Decimal?  @default(0) @map("TKHUSUS") @db.Decimal(15, 0)
  tMakan       Decimal?  @default(0) @map("TMAKAN") @db.Decimal(15, 0)
  totUShift    Decimal?  @default(0) @map("TOTUSHIFT") @db.Decimal(15, 0)
  mealOt       Decimal?  @default(0) @map("MEALOT") @db.Decimal(15, 0)
  tunjRapel    Decimal?  @default(0) @map("TUNJRAPEL") @db.Decimal(15, 0)
  tunjMedik    Decimal?  @default(0) @map("TUNJMEDIK") @db.Decimal(15, 0)
  tunjLain     Decimal?  @default(0) @map("TUNJLAIN") @db.Decimal(15, 0)
  admBank      Decimal?  @default(0) @map("ADM_BANK") @db.Decimal(15, 0)
  rapel        Decimal?  @default(0) @map("RAPEL") @db.Decimal(15, 0)
  tLain        Decimal?  @default(0) @map("TLAIN") @db.Decimal(15, 0)
  tPph21       Decimal?  @default(0) @map("TPPH21") @db.Decimal(15, 0)
  upahTetap    Decimal?  @default(0) @map("UPAHTETAP") @db.Decimal(15, 0)
  dasarBpjsTk  Decimal?  @default(0) @map("DASAR_BPJSTK") @db.Decimal(15, 0)
  dasarBpjsKes Decimal?  @default(0) @map("DASAR_BPJSKES") @db.Decimal(15, 0)
  dasarJpn     Decimal?  @default(0) @map("DASAR_JPN") @db.Decimal(15, 0)
  jLembur1     Decimal?  @default(0.00) @map("JLEMBUR1") @db.Decimal(6, 2)
  jLembur2     Decimal?  @default(0.00) @map("JLEMBUR2") @db.Decimal(6, 2)
  jLembur3     Decimal?  @default(0.00) @map("JLEMBUR3") @db.Decimal(6, 2)
  jLembur4     Decimal?  @default(0.00) @map("JLEMBUR4") @db.Decimal(6, 2)
  totJLembur   Decimal?  @default(0.00) @map("TOTJLEMBUR") @db.Decimal(7, 2)
  lebihJam     Decimal?  @default(0.00) @map("LEBIHJAM") @db.Decimal(7, 2)
  totULembur   Decimal?  @default(0) @map("TOTULEMBUR") @db.Decimal(15, 0)
  totLmbNerus  Decimal?  @default(0) @map("TOTLMBNERUS") @db.Decimal(15, 0)
  jknComp      Decimal?  @default(0.0000) @map("JKN_COMP") @db.Decimal(14, 4)
  jknEmpl      Decimal?  @default(0.0000) @map("JKN_EMPL") @db.Decimal(14, 4)
  jhtComp      Decimal?  @default(0.0000) @map("JHT_COMP") @db.Decimal(14, 4)
  jhtEmpl      Decimal?  @default(0.0000) @map("JHT_EMPL") @db.Decimal(14, 4)
  jpnComp      Decimal?  @default(0.0000) @map("JPN_COMP") @db.Decimal(14, 4)
  jpnEmpl      Decimal?  @default(0.0000) @map("JPN_EMPL") @db.Decimal(14, 4)
  hrShift1     Int?      @default(0) @map("HR_SHIFT1")
  hrShift2     Int?      @default(0) @map("HR_SHIFT2")
  hrShift3     Int?      @default(0) @map("HR_SHIFT3")
  hrShift4     Int?      @default(0) @map("HR_SHIFT4")
  hrShift5     Int?      @default(0) @map("HR_SHIFT5")
  hrShift6     Int?      @default(0) @map("HR_SHIFT6")
  hrShift7     Int?      @default(0) @map("HR_SHIFT7")
  hrShift8     Int?      @default(0) @map("HR_SHIFT8")
  hrShift9     Int?      @default(0) @map("HR_SHIFT9")
  hrShift10    Int?      @default(0) @map("HR_SHIFT10")
  gKotor       Decimal?  @default(0) @map("GKOTOR") @db.Decimal(15, 0)
  gBersih      Decimal?  @default(0) @map("GBERSIH") @db.Decimal(15, 0)
  thr          Decimal?  @default(0) @map("THR") @db.Decimal(15, 0)
  pphThr       Decimal?  @default(0) @map("PPH_THR") @db.Decimal(15, 0)
  closing      Boolean?  @default(false) @map("CLOSING")
  paidDate     DateTime? @map("paid_date") @db.Date
  paidBy       String?   @map("paid_by") @db.VarChar(50)
  createdAt    DateTime  @default(now()) @map("created_at") @db.Timestamp
  updatedAt    DateTime  @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan   Karyawan @relation(fields: [emplId], references: [emplId])
  periodeRef Periode? @relation(fields: [period], references: [periodeId])
  jabatan    MstJab?  @relation(fields: [kdJab], references: [kdJab])

  @@unique([period, emplId], name: "gaji_unique")
  @@index([period])
  @@index([emplId])
  @@index([tglProses])
  @@index([closing])
  @@map("gaji")
}

model Potongan {
  id         String   @id @default(uuid()) @db.Uuid
  period     String   @map("PERIOD") @db.VarChar(6)
  transId    String   @map("TRANS_ID") @db.VarChar(10)
  transDate  DateTime @map("TRANS_DATE") @db.Date
  transCode  Int      @default(0) @map("TRANS_CODE")
  emplId     String   @map("EMPL_ID") @db.VarChar(9)
  nik        String?  @map("NIK") @db.VarChar(10)
  jumlah     Decimal? @default(0) @map("JUMLAH") @db.Decimal(15, 0)
  keterangan String?  @map("KETERANGAN") @db.VarChar(50)
  status     Boolean? @default(true) @map("status")
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan   Karyawan     @relation(fields: [emplId], references: [emplId])
  jenisPot   JnsPotongan? @relation(fields: [transCode], references: [transCode])
  periodeRef Periode?     @relation(fields: [period], references: [periodeId])

  @@unique([period, transId], name: "potongan_unique")
  @@index([period])
  @@index([emplId])
  @@index([transDate])
  @@map("potongan")
}

model Tunjangan {
  id         String   @id @default(uuid()) @db.Uuid
  period     String   @map("PERIOD") @db.VarChar(6)
  transId    String   @map("TRANS_ID") @db.VarChar(10)
  transDate  DateTime @map("TRANS_DATE") @db.Date
  transCode  Int      @default(0) @map("TRANS_CODE")
  emplId     String   @map("EMPL_ID") @db.VarChar(9)
  nik        String?  @map("NIK") @db.VarChar(10)
  jumlah     Decimal? @default(0) @map("JUMLAH") @db.Decimal(15, 0)
  keterangan String?  @map("KETERANGAN") @db.VarChar(50)
  status     Boolean? @default(true) @map("status")
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan   Karyawan      @relation(fields: [emplId], references: [emplId])
  jenisTunj  JnsTunjangan? @relation(fields: [transCode], references: [transCode])
  periodeRef Periode?      @relation(fields: [period], references: [periodeId])

  @@unique([period, transId], name: "tunjangan_unique")
  @@index([period])
  @@index([emplId])
  @@index([transDate])
  @@map("tunjangan")
}

model Rapel {
  id         String   @id @default(uuid()) @db.Uuid
  period     String   @map("PERIOD") @db.VarChar(6)
  transId    String   @map("TRANS_ID") @db.VarChar(10)
  transDate  DateTime @map("TRANS_DATE") @db.Date
  transCode  Int      @default(0) @map("TRANS_CODE")
  emplId     String   @map("EMPL_ID") @db.VarChar(9)
  nik        String?  @map("NIK") @db.VarChar(10)
  jumlah     Decimal? @default(0) @map("JUMLAH") @db.Decimal(15, 0)
  keterangan String?  @map("KETERANGAN") @db.VarChar(50)
  status     Boolean? @default(true) @map("status")
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan   Karyawan  @relation(fields: [emplId], references: [emplId])
  jenisRapel JnsRapel? @relation(fields: [transCode], references: [transCode])
  periodeRef Periode?  @relation(fields: [period], references: [periodeId])

  @@unique([period, transId], name: "rapel_unique")
  @@index([period])
  @@index([emplId])
  @@index([transDate])
  @@map("rapel")
}

model PphThn {
  id          String   @id @default(uuid()) @db.Uuid
  emplId      String   @map("EMPL_ID") @db.VarChar(9)
  thPj        String   @map("THPJ") @db.VarChar(4)
  npwp        String   @default("") @map("NPWP") @db.VarChar(20)
  kdWni       Boolean? @default(true) @map("KD_WNI")
  nik         String   @default("") @map("NIK") @db.VarChar(10)
  nama        String   @default("") @map("NAMA") @db.VarChar(30)
  alamat      String   @default("") @map("ALAMAT") @db.VarChar(100)
  gajiBruto   Decimal? @default(0) @map("GAJI_BRUTO") @db.Decimal(15, 0)
  biayaJbt    Decimal? @default(0) @map("BIAYA_JBT") @db.Decimal(15, 0)
  pengurang   Decimal? @default(0) @map("PENGURANG") @db.Decimal(15, 0)
  netto       Decimal? @default(0) @map("NETTO") @db.Decimal(15, 0)
  ptkp        Decimal? @default(0) @map("PTKP") @db.Decimal(15, 0)
  pkp         Decimal? @default(0) @map("PKP") @db.Decimal(15, 0)
  pph21       Decimal? @default(0) @map("PPH21") @db.Decimal(15, 0)
  sudahBayar  Decimal? @default(0) @map("SUDAH_BAYAR") @db.Decimal(15, 0)
  kurangBayar Decimal? @default(0) @map("KURANG_BAYAR") @db.Decimal(15, 0)
  status      Boolean? @default(false) @map("status")
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan @relation(fields: [emplId], references: [emplId])

  @@unique([emplId, thPj], name: "pph_thn_unique")
  @@index([emplId])
  @@index([thPj])
  @@map("pphthn")
}

model Ptkp {
  kode       Int      @id @default(0) @map("KODE")
  type       String   @default("") @map("TYPE") @db.VarChar(3)
  wPajak     Decimal  @default(0) @map("WPAJAK") @db.Decimal(15, 0)
  tKeluarga  Decimal  @default(0) @map("TKELUARGA") @db.Decimal(15, 0)
  keterangan String   @default("") @map("KETERANGAN") @db.VarChar(20)
  isActive   Boolean? @default(true) @map("is_active")
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  @@map("ptkp")
}

model BatasPajak {
  id        String   @id @default(uuid()) @db.Uuid
  batas1    Decimal  @default(0) @map("BATAS1") @db.Decimal(15, 0)
  batas2    Decimal  @default(0) @map("BATAS2") @db.Decimal(15, 0)
  persen    Decimal  @default(0.00) @map("PERSEN") @db.Decimal(5, 2)
  tahun     Int      @default(2024) @map("tahun")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  @@unique([batas1, batas2, tahun], name: "batas_pajak_unique")
  @@index([tahun])
  @@map("bataspajak")
}

model BatasThr {
  id        String   @id @default(uuid()) @db.Uuid
  batas1    Decimal  @default(0.0) @map("BATAS1") @db.Decimal(4, 1)
  batas2    Decimal  @default(0.0) @map("BATAS2") @db.Decimal(4, 1)
  persen    Decimal  @default(0.00) @map("PERSEN") @db.Decimal(5, 2)
  tahun     Int      @default(2024) @map("tahun")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  @@unique([batas1, batas2, tahun], name: "batas_thr_unique")
  @@index([tahun])
  @@map("batasthr")
}

model MasaKerja {
  id        String   @id @default(uuid()) @db.Uuid
  batas1    Decimal  @default(0.0) @map("BATAS1") @db.Decimal(4, 1)
  batas2    Decimal  @default(0.0) @map("BATAS2") @db.Decimal(4, 1)
  value     Decimal  @default(0) @map("VALUE") @db.Decimal(15, 0)
  tahun     Int      @default(2024) @map("tahun")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  @@unique([batas1, batas2, tahun], name: "masa_kerja_unique")
  @@index([tahun])
  @@map("masakerja")
}

model GradeBonus {
  grade     String   @id @map("GRADE") @db.Char(1)
  persen    Decimal  @map("PERSEN") @db.Decimal(5, 2)
  isActive  Boolean? @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  @@map("gradebonus")
}

model PinjamHdr {
  id          String   @id @default(uuid()) @db.Uuid
  emplId      String   @map("EMPL_ID") @db.VarChar(9)
  tglPinjam   DateTime @map("TGL_PINJAM") @db.Date
  totPinjam   Decimal  @default(0) @map("TOT_PINJAM") @db.Decimal(15, 0)
  jnsSumber   Int      @default(0) @map("JNS_SUMBER")
  saldoPinjam Decimal  @default(0) @map("SALDO_PINJAM") @db.Decimal(15, 0)
  jmlCicil    Int      @default(0) @map("JML_CICIL")
  keterangan  String   @default("") @map("KETERANGAN") @db.VarChar(100)
  status      Boolean? @default(true) @map("status")
  approved    Boolean? @default(false) @map("approved")
  approvedBy  String?  @map("approved_by") @db.VarChar(50)
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan  Karyawan    @relation(fields: [emplId], references: [emplId])
  pinjamDet PinjamDet[]

  @@unique([emplId, tglPinjam, totPinjam, jnsSumber], name: "pinjam_hdr_unique")
  @@unique([emplId, tglPinjam])
  @@index([emplId])
  @@index([tglPinjam])
  @@index([status])
  @@map("pinjamhdr")
}

model PinjamDet {
  id          String   @id @default(uuid()) @db.Uuid
  transId     String   @map("TRANS_ID") @db.VarChar(10)
  periode     String   @map("PERIODE") @db.VarChar(6)
  jnsSumber   Int      @default(0) @map("JNS_SUMBER")
  tglBayar    DateTime @map("TGL_BAYAR") @db.Date
  tglPinjam   DateTime @map("TGL_PINJAM") @db.Date
  emplId      String   @map("EMPL_ID") @db.VarChar(9)
  jmlBayar    Decimal  @default(0) @map("JML_BAYAR") @db.Decimal(15, 0)
  saldoPinjam Decimal  @default(0) @map("SALDO_PINJAM") @db.Decimal(15, 0)
  keterangan  String   @default("") @map("KETERANGAN") @db.VarChar(80)
  flagLunas   Boolean? @default(false) @map("FLAG_LUNAS")
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan   Karyawan   @relation(fields: [emplId], references: [emplId])
  pinjamHdr  PinjamHdr? @relation(fields: [emplId, tglPinjam], references: [emplId, tglPinjam])
  periodeRef Periode?   @relation(fields: [periode], references: [periodeId])

  @@unique([transId, periode, jnsSumber, tglBayar], name: "pinjam_det_unique")
  @@index([emplId])
  @@index([periode])
  @@index([tglBayar])
  @@map("pinjamdet")
}

model SaldoMedic {
  id        String   @id @default(uuid()) @db.Uuid
  period    String   @map("PERIOD") @db.VarChar(6)
  emplId    String   @map("EMPL_ID") @db.VarChar(9)
  saldo     Decimal  @default(0) @map("SALDO") @db.Decimal(15, 0)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan   Karyawan @relation(fields: [emplId], references: [emplId])
  periodeRef Periode? @relation(fields: [period], references: [periodeId])

  @@unique([period, emplId], name: "saldo_medic_unique")
  @@index([period])
  @@index([emplId])
  @@map("saldo_medic")
}

model MedikTrans {
  id          String   @id @default(uuid()) @db.Uuid
  transId     String   @unique @map("TRANS_ID") @db.VarChar(10)
  period      String   @map("PERIOD") @db.VarChar(6)
  tglMedik    DateTime @map("TGL_MEDIK") @db.Date
  emplId      String   @map("EMPL_ID") @db.VarChar(9)
  nik         String   @map("NIK") @db.VarChar(10)
  pasien      String   @map("PASIEN") @db.VarChar(30)
  klinik      String   @map("KLINIK") @db.VarChar(30)
  kodeKlaim   Int      @default(0) @map("KODE_KLAIM")
  byDokter    Decimal  @default(0) @map("BY_DOKTER") @db.Decimal(15, 0)
  byObat      Decimal  @default(0) @map("BY_OBAT") @db.Decimal(15, 0)
  byLain      Decimal  @default(0) @map("BY_LAIN") @db.Decimal(15, 0)
  byTotal     Decimal  @default(0) @map("BY_TOTAL") @db.Decimal(15, 0)
  sisaPlafond Decimal  @default(0) @map("SISA_PLAFOND") @db.Decimal(15, 0)
  keterangan  String   @map("KETERANGAN") @db.VarChar(40)
  kdBayar     Int      @default(0) @map("KD_BAYAR")
  status      Boolean? @default(false) @map("status")
  approved    Boolean? @default(false) @map("approved")
  approvedBy  String?  @map("approved_by") @db.VarChar(50)
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan   Karyawan @relation(fields: [emplId], references: [emplId])
  periodeRef Periode? @relation(fields: [period], references: [periodeId])

  @@index([period])
  @@index([emplId])
  @@index([tglMedik])
  @@index([status])
  @@map("medik_trans")
}

// ==========================================
// SYSTEM & PARAMETER
// ==========================================

model Parameter {
  id              String   @id @default(uuid()) @db.Uuid
  kdCmpy          String   @map("KD_CMPY") @db.Char(3)
  validDate       DateTime @map("VALID_DATE") @db.Date
  company         String   @default("") @map("COMPANY") @db.VarChar(30)
  umk             Decimal  @default(0) @map("UMK") @db.Decimal(15, 0)
  umkRegional     Decimal? @default(0) @map("UMK_REGIONAL") @db.Decimal(15, 0)
  uangMakan       Decimal? @default(0) @map("UANG_MAKAN") @db.Decimal(15, 0)
  uangTransport   Decimal? @default(0) @map("UANG_TRANSPORT") @db.Decimal(15, 0)
  persenBpjsTk    Decimal? @default(0.00) @map("PERSEN_BPJSTK") @db.Decimal(5, 2)
  persenBpjsKes   Decimal? @default(0.00) @map("PERSEN_BPJSKES") @db.Decimal(5, 2)
  maxPlafondMedic Decimal? @default(0) @map("MAX_PLAFOND_MEDIC") @db.Decimal(15, 0)
  isActive        Boolean? @default(true) @map("is_active")
  createdAt       DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt       DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  companyRef Company? @relation(fields: [kdCmpy], references: [kodeCmpy])

  @@unique([kdCmpy, validDate], name: "parameter_unique")
  @@index([kdCmpy])
  @@index([validDate])
  @@map("parameter")
}

model Periode {
  periodeId String   @id @map("PERIODE_ID") @db.VarChar(6)
  awal      DateTime @map("AWAL") @db.Date
  akhir     DateTime @map("AKHIR") @db.Date
  dataDefa  Boolean? @default(false) @map("DATA_DEFA")
  tutup     Boolean? @default(false) @map("TUTUP")
  tahun     Int      @map("tahun")
  bulan     Int      @map("bulan")
  nama      String?  @map("nama") @db.VarChar(50)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  kdCmpy     String?      @map("KD_CMPY") @db.Char(3)
  company    Company?     @relation(fields: [kdCmpy], references: [kodeCmpy])
  absent     Absent[]
  lembur     Lembur[]
  gaji       Gaji[]
  potongan   Potongan[]
  tunjangan  Tunjangan[]
  rapel      Rapel[]
  pinjamDet  PinjamDet[]
  saldoMedic SaldoMedic[]
  medikTrans MedikTrans[]
  shiftAllws ShiftAllw[]

  @@index([awal, akhir])
  @@index([tutup])
  @@map("periode")
}

model Bulan {
  no         String   @id @map("NO") @db.VarChar(2)
  nmBulan    String   @default("") @map("NMBULAN") @db.VarChar(10)
  nmBulanPdk String   @default("") @map("NMBULANPDK") @db.VarChar(3)
  isActive   Boolean? @default(true) @map("is_active")
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  @@map("bulan")
}

model SysUser {
  id         String    @id @default(uuid()) @db.Uuid
  legacyId   Int?      @unique @map("Id")
  nik        String    @unique @default("") @map("Nik") @db.VarChar(11)
  email      String    @unique @default("") @map("Email") @db.VarChar(60)
  username   String    @unique @default("") @map("Username") @db.VarChar(32)
  password   String    @default("") @map("Password") @db.VarChar(64)
  name       String    @default("") @map("Name") @db.VarChar(64)
  positionId Int       @default(0) @map("PositionId")
  active     Boolean?  @default(true) @map("Active")
  emplId     String    @default("") @map("Empl_id") @db.VarChar(11)
  lastLogin  DateTime? @map("Last_login") @db.Timestamp
  lastIp     String?   @map("last_ip") @db.VarChar(45)
  isOnline   Boolean?  @default(false) @map("is_online")
  createdAt  DateTime  @default(now()) @map("Created_date") @db.Timestamp
  updatedAt  DateTime  @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan             Karyawan?         @relation(fields: [emplId], references: [emplId])
  position             SysUserPosition?  @relation(fields: [positionId], references: [legacyId])
  privileges           SysPrivilege[]
  notifications        SysNotification[] @relation("ReceivedNotifications")
  createdNotifications SysNotification[] @relation("CreatedNotifications")
  eventHistory         SysEventHistory[]

  @@index([username])
  @@index([email])
  @@index([active])
  @@map("sys_user")
}

model SysMenu {
  id        String   @id @default(uuid()) @db.Uuid
  legacyId  Int      @unique @map("Id")
  modulName String   @default("") @map("modulname") @db.VarChar(30)
  desc      String?  @default("") @map("Desc") @db.Text
  url       String   @default("") @map("Url") @db.VarChar(60)
  mark      Boolean? @default(false) @map("Mark")
  icon      String?  @default("") @map("Icon") @db.VarChar(60)
  orderNo   Int?     @default(0) @map("order_no")
  isActive  Boolean? @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  submenus SysSubmenu[]

  @@index([orderNo])
  @@index([isActive])
  @@map("sys_menu")
}

model SysSubmenu {
  id         String   @id @default(uuid()) @db.Uuid
  legacyId   Int      @unique @map("Id")
  mainMenuId Int      @default(0) @map("MainMenuId")
  modulName  String   @default("") @map("ModulName") @db.VarChar(32)
  desc       String   @default("") @map("Desc") @db.VarChar(32)
  url        String   @map("URL") @db.Text
  icon       String?  @map("Icon") @db.Text
  orderNo    Int?     @default(0) @map("order_no")
  isActive   Boolean? @default(true) @map("is_active")
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  menu SysMenu @relation(fields: [mainMenuId], references: [legacyId])

  @@index([mainMenuId])
  @@index([orderNo])
  @@index([isActive])
  @@map("sys_submenu")
}

model SysPrivilege {
  id         String   @id @default(uuid()) @db.Uuid
  legacyId   Int      @unique @map("Id")
  userId     Int?     @default(0) @map("UserId")
  positionId Int      @default(0) @map("PositionId")
  modul      String   @default("") @map("modul") @db.VarChar(200)
  canAdd     Boolean? @default(false) @map("Add")
  canView    Boolean? @default(false) @map("View")
  canEdit    Boolean? @default(false) @map("Edit")
  canDelete  Boolean? @default(false) @map("Remove")
  canPrint   Boolean? @default(false) @map("Print")
  canApprove Boolean? @default(false) @map("Approve")
  isActive   Boolean? @default(true) @map("is_active")
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  user     SysUser?        @relation(fields: [userId], references: [legacyId])
  position SysUserPosition @relation(fields: [positionId], references: [legacyId])

  @@index([userId])
  @@index([positionId])
  @@index([isActive])
  @@map("sys_privilege")
}

model SysUserPosition {
  id           String   @id @default(uuid()) @db.Uuid
  legacyId     Int      @unique @map("Id")
  positionCode String   @unique @default("") @map("PositionCode") @db.VarChar(11)
  positionName String   @default("") @map("PositionName") @db.VarChar(32)
  remark       String?  @map("Remark") @db.Text
  active       Boolean? @default(true) @map("Active")
  level        Int?     @default(0) @map("level")
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt    DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  users      SysUser[]
  privileges SysPrivilege[]

  @@index([positionCode])
  @@index([active])
  @@index([level])
  @@map("sys_user_position")
}

model SysNotification {
  id            String   @id @default(uuid()) @db.Uuid
  legacyId      Int      @unique @map("Id")
  creatorUserId Int      @default(0) @map("CreatorUserId")
  type          Int      @default(0) @map("Type")
  subject       String   @default("") @map("Subject") @db.VarChar(60)
  note          String   @map("Note") @db.Text
  url           String?  @map("Url") @db.Text
  status        Boolean? @default(false) @map("Status")
  isRead        Boolean? @default(false) @map("is_read")
  recipientId   Int?     @map("recipient_id")
  createdAt     DateTime @default(now()) @map("Created_date") @db.Timestamp
  updatedAt     DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  creator   SysUser? @relation("CreatedNotifications", fields: [creatorUserId], references: [legacyId])
  recipient SysUser? @relation("ReceivedNotifications", fields: [recipientId], references: [legacyId])

  @@index([creatorUserId])
  @@index([status])
  @@index([isRead])
  @@index([createdAt])
  @@map("sys_notification")
}

model SysEventHistory {
  id        String   @id @default(uuid()) @db.Uuid
  legacyId  Int      @unique @map("Id")
  eventId   Int      @default(0) @map("EventId")
  logUser   String   @default("") @map("Loguser") @db.VarChar(20)
  modul     String?  @map("Modul") @db.VarChar(20)
  action    String?  @map("Action") @db.VarChar(20)
  data      String?  @map("Data") @db.Text
  ipAddress String?  @map("ip_address") @db.VarChar(45)
  userAgent String?  @map("user_agent") @db.Text
  datetime  DateTime @default(now()) @map("Datetime") @db.Timestamp

  // Relations
  user SysUser? @relation(fields: [logUser], references: [username])

  @@index([logUser])
  @@index([modul])
  @@index([datetime])
  @@map("sys_event_history")
}

// ==========================================
// CUTI & SHIFT
// ==========================================

model Dcuti {
  id         String      @id @default(uuid()) @db.Uuid
  kodeId     String      @unique @map("ID") @db.VarChar(10)
  emplId     String?     @map("EMPL_ID") @db.VarChar(9)
  tahun      Int?        @default(2000) @map("TAHUN")
  nik        String?     @map("NIK") @db.VarChar(10)
  jnsCuti    Int?        @default(1) @map("JNS_CUTI")
  tglMulai   DateTime?   @map("TGL_MULAI") @db.Date
  tglAkhir   DateTime?   @map("TGL_AKHIR") @db.Date
  cutiPakai  Int?        @default(0) @map("CUTI_PAKAI")
  keterangan String?     @default("") @map("KETERANGAN") @db.VarChar(100)
  status     StatusCuti? @default(PENDING) @map("STATUS")
  remark     String?     @default("") @map("REMARK") @db.VarChar(100)
  approvedBy String?     @map("approved_by") @db.VarChar(50)
  approvedAt DateTime?   @map("approved_at") @db.Timestamp
  createdAt  DateTime    @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime    @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan? @relation(fields: [emplId], references: [emplId])

  @@index([emplId])
  @@index([tahun])
  @@index([status])
  @@index([tglMulai, tglAkhir])
  @@map("dcuti")
}

model Hcuti {
  id         String   @id @default(uuid()) @db.Uuid
  tahun      String   @map("TAHUN") @db.VarChar(4)
  emplId     String   @map("EMPL_ID") @db.VarChar(9)
  nik        String   @default("") @map("NIK") @db.VarChar(10)
  tglMsk     DateTime @map("TGL_MSK") @db.Date
  saldoCuti  Int      @default(0) @map("SALDO_CUTI")
  totalPakai Int      @default(0) @map("TOTAL_PAKAI")
  totalSisa  Int      @default(0) @map("TOTAL_SISA")
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan Karyawan @relation(fields: [emplId], references: [emplId])

  @@unique([tahun, emplId], name: "hcuti_unique")
  @@index([tahun])
  @@index([emplId])
  @@map("hcuti")
}

model JnsCuti {
  id        String   @id @default(uuid()) @db.Uuid
  jnsCuti   Int      @unique @map("jns_cuti")
  kdJns     String   @default("") @map("kd_jnscuti") @db.VarChar(3)
  nmCuti    String   @default("") @map("nm_cuti") @db.VarChar(35)
  jatah     Int      @default(0) @map("jatah")
  kodeDesc  String   @default("") @map("kode_desc") @db.VarChar(3)
  isActive  Boolean? @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  descAbsen DescAbsen? @relation(fields: [kodeDesc], references: [kodeDesc])

  @@index([isActive])
  @@map("jnscuti")
}

model JnsKary {
  id        String   @id @default(uuid()) @db.Uuid
  kdJns     Int      @unique @map("KD_JNS")
  jenisKary String   @default("") @map("JENIS_KARY") @db.VarChar(15)
  isActive  Boolean? @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  @@index([isActive])
  @@map("jnskary")
}

model JnsPotongan {
  id        String   @id @default(uuid()) @db.Uuid
  transCode Int      @unique @default(0) @map("TRANS_CODE")
  jenis     String   @default("") @map("JENIS") @db.VarChar(30)
  isActive  Boolean? @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  potongan Potongan[]

  @@index([isActive])
  @@map("jnspotongan")
}

model JnsRapel {
  id        String   @id @default(uuid()) @db.Uuid
  transCode Int      @unique @default(0) @map("TRANS_CODE")
  jenis     String   @default("") @map("JENIS") @db.VarChar(30)
  isActive  Boolean? @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  rapel Rapel[]

  @@index([isActive])
  @@map("jnsrapel")
}

model JnsTunjangan {
  id        String   @id @default(uuid()) @db.Uuid
  transCode Int      @unique @default(0) @map("TRANS_CODE")
  jenis     String   @default("") @map("JENIS") @db.VarChar(30)
  isActive  Boolean? @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  tunjangan Tunjangan[]

  @@index([isActive])
  @@map("jnstunjangan")
}

model Dshift {
  id         String   @id @default(uuid()) @db.Uuid
  periode    String   @map("PERIODE") @db.VarChar(6)
  kdCmpy     String   @map("KD_CMPY") @db.VarChar(3)
  groupShift String   @map("GROUP_SHIFT") @db.VarChar(2)
  groupName  String   @default("") @map("GROUP_NAME") @db.VarChar(30)
  shift01    Int?     @default(0) @map("SHIFT01")
  shift02    Int?     @default(0) @map("SHIFT02")
  shift03    Int?     @default(0) @map("SHIFT03")
  shift04    Int?     @default(0) @map("SHIFT04")
  shift05    Int?     @default(0) @map("SHIFT05")
  shift06    Int?     @default(0) @map("SHIFT06")
  shift07    Int?     @default(0) @map("SHIFT07")
  shift08    Int?     @default(0) @map("SHIFT08")
  shift09    Int?     @default(0) @map("SHIFT09")
  shift10    Int?     @default(0) @map("SHIFT10")
  shift11    Int?     @default(0) @map("SHIFT11")
  shift12    Int?     @default(0) @map("SHIFT12")
  shift13    Int?     @default(0) @map("SHIFT13")
  shift14    Int?     @default(0) @map("SHIFT14")
  shift15    Int?     @default(0) @map("SHIFT15")
  shift16    Int?     @default(0) @map("SHIFT16")
  shift17    Int?     @default(0) @map("SHIFT17")
  shift18    Int?     @default(0) @map("SHIFT18")
  shift19    Int?     @default(0) @map("SHIFT19")
  shift20    Int?     @default(0) @map("SHIFT20")
  shift21    Int?     @default(0) @map("SHIFT21")
  shift22    Int?     @default(0) @map("SHIFT22")
  shift23    Int?     @default(0) @map("SHIFT23")
  shift24    Int?     @default(0) @map("SHIFT24")
  shift25    Int?     @default(0) @map("SHIFT25")
  shift26    Int?     @default(0) @map("SHIFT26")
  shift27    Int?     @default(0) @map("SHIFT27")
  shift28    Int?     @default(0) @map("SHIFT28")
  shift29    Int?     @default(0) @map("SHIFT29")
  shift30    Int?     @default(0) @map("SHIFT30")
  shift31    Int?     @default(0) @map("SHIFT31")
  hrKerja    Int?     @default(0) @map("HR_KERJA")
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  company       Company?    @relation(fields: [kdCmpy], references: [kodeCmpy])
  groupShiftRef GroupShift? @relation(fields: [groupShift], references: [groupShift])

  @@unique([periode, kdCmpy, groupShift], name: "dshift_unique")
  @@index([periode])
  @@index([kdCmpy])
  @@index([groupShift])
  @@map("dshift")
}

model GroupShift {
  groupShift String   @id @map("GROUP_SHIFT") @db.VarChar(2)
  groupName  String   @default("") @map("GROUP_NAME") @db.VarChar(30)
  isActive   Boolean? @default(true) @map("is_active")
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  dshift   Dshift[]
  karyawan Karyawan[]

  @@index([isActive])
  @@map("groupshift")
}

model ShiftAllw {
  id        String   @id @default(uuid()) @db.Uuid
  period    String   @map("PERIOD") @db.VarChar(6)
  speriod   Int      @default(1) @map("SPERIOD")
  emplId    String   @map("EMPL_ID") @db.VarChar(9)
  shiftCode Int?     @default(0) @map("SHIFT_CODE")
  allowance Decimal? @default(0) @map("ALLOWANCE") @db.Decimal(15, 0)
  mealAllow Decimal? @default(0) @map("MEAL_ALLOW") @db.Decimal(15, 0)
  milkAllow Decimal? @default(0) @map("MILK_ALLOW") @db.Decimal(15, 0)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  // Relations
  karyawan   Karyawan @relation(fields: [emplId], references: [emplId])
  periodeRef Periode? @relation(fields: [period], references: [periodeId])

  @@unique([period, speriod, emplId], name: "shift_allw_unique")
  @@index([period])
  @@index([emplId])
  @@map("shift_allw")
}

// ==========================================
// MODEL LAIN (Legacy/Additional)
// ==========================================

model KaryawanCopy {
  id        String   @id @default(uuid()) @db.Uuid
  emplId    String   @unique @map("EMPL_ID") @db.VarChar(9)
  nik       String?  @map("NIK") @db.VarChar(10)
  nama      String?  @map("NAMA") @db.VarChar(30)
  // ... other fields as needed
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp

  @@map("karyawan_copy")
}

model Gapok2018 {
  id           String   @id @default(uuid()) @db.Uuid
  nik          String?  @default("") @map("NIK") @db.VarChar(4)
  namaKaryawan String?  @map("NAMA KARYAWAN") @db.VarChar(30)
  gapok        Decimal? @map("GAPOK") @db.Decimal(12, 0)
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamp

  @@map("gapok_2018")
}

model GroupEmpl {
  id        String   @id @default(uuid()) @db.Uuid
  nik       String   @default("") @map("NIK") @db.VarChar(10)
  nama      String   @default("") @map("Nama") @db.VarChar(30)
  group     String   @default("") @map("GROUP") @db.VarChar(3)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp

  @@map("group_empl")
}

model Grphift {
  id         String   @id @default(uuid()) @db.Uuid
  nik        String   @map("NIK") @db.VarChar(10)
  nama       String   @map("Nama") @db.VarChar(50)
  groupShift String   @map("GROUPSHIFT") @db.VarChar(5)
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp

  @@map("grphift")
}

model Rekening {
  id        String   @id @default(uuid()) @db.Uuid
  nik       String?  @map("NIK") @db.VarChar(9)
  nama      String?  @map("Nama") @db.VarChar(30)
  rekNo     String?  @map("rekno") @db.VarChar(20)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp

  @@map("rekening")
}

model SUser {
  id        String   @id @default(uuid()) @db.Uuid
  nama      String   @unique @default("") @map("nama") @db.VarChar(15)
  kelompok  String   @default("") @map("kelompok") @db.VarChar(10)
  pwd       String   @default("") @map("pwd") @db.VarChar(10)
  akses     String   @default("") @map("akses") @db.VarChar(5)
  isActive  Boolean? @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp

  @@map("suser")
}
